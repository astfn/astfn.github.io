<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicons/Ashun.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicons/Ashun.ico">
  <link rel="mask-icon" href="/images/favicons/Ashun.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":true,"style":"mac"},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":true,"color":"#34495e","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="阿顺特烦恼,希望大家没有烦恼">
<meta property="og:type" content="website">
<meta property="og:title" content="AshunBlog">
<meta property="og:url" content="http://example.com/page/6/index.html">
<meta property="og:site_name" content="AshunBlog">
<meta property="og:description" content="阿顺特烦恼,希望大家没有烦恼">
<meta property="og:locale" content="zh_CN">
<meta property="article:author" content="阿顺特烦恼">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="http://example.com/page/6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : true,
    isPost : false,
    lang   : 'zh-CN'
  };
</script>

  <title>AshunBlog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">AshunBlog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">好好学习,天天Code</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">2</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">11</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">33</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>
  <a role="button" class="book-mark-link book-mark-link-fixed"></a>

  <a href="https://github.com/astfn" class="github-corner" title="Follow me on GitHub" aria-label="Follow me on GitHub" rel="noopener" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content index posts-expand">
            
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/05/16/Web%E5%89%8D%E7%AB%AF/%E4%B8%89%E5%89%91%E5%AE%A2/JavaScript/JavaScript%E5%A4%A7%E6%80%BB%E7%BB%93/DOM/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/headPortrait.jpg">
      <meta itemprop="name" content="阿顺特烦恼">
      <meta itemprop="description" content="阿顺特烦恼,希望大家没有烦恼">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="AshunBlog">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          
            <a href="/2021/05/16/Web%E5%89%8D%E7%AB%AF/%E4%B8%89%E5%89%91%E5%AE%A2/JavaScript/JavaScript%E5%A4%A7%E6%80%BB%E7%BB%93/DOM/" class="post-title-link" itemprop="url">DOM</a>
        </h2>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-05-16 13:41:21" itemprop="dateCreated datePublished" datetime="2021-05-16T13:41:21+08:00">2021-05-16</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-05-17 09:12:09" itemprop="dateModified" datetime="2021-05-17T09:12:09+08:00">2021-05-17</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web%E5%89%8D%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">Web前端</span></a>
                </span>
                  ，
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Web%E5%89%8D%E7%AB%AF/JavaScript%E5%A4%A7%E6%80%BB%E7%BB%93/" itemprop="url" rel="index"><span itemprop="name">JavaScript大总结</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
          <h2 id="DOM"><a href="#DOM" class="headerlink" title="DOM"></a>DOM</h2><h3 id="基础知识"><a href="#基础知识" class="headerlink" title="基础知识"></a>基础知识</h3><p>DOM 即Document Object Model 文档对象模型。如果对HTML很了解使用DOM并不复杂。</p>
<p>通过js操作界面元素，操作的对象即DOM。</p>
<p>浏览器在加载页面时会生成DOM对象，以供我们使用JS控制页面元素。</p>
<h4 id="文档渲染"><a href="#文档渲染" class="headerlink" title="文档渲染"></a>文档渲染</h4><p>浏览器会将HTML文本内容进行渲染，并生成相应的JS对象，同时会对不符规则的标签进行处理。</p>
<ul>
<li>浏览器会将标签规范后渲染页面</li>
<li>目的一让页面可以正确呈现</li>
<li>目的二可以生成统一的JS可操作对象</li>
</ul>
<h5 id="标签修复"><a href="#标签修复" class="headerlink" title="标签修复"></a>标签修复</h5><p>在html文件中，若只有内容<code>阿顺特烦恼</code>而<strong>没有任何标签时</strong>，浏览器会自动修复成以下格式</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;&lt;&#x2F;head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">阿顺特烦恼</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;&#x2F;html&gt;</span><br></pre></td></tr></table></figure>

<p>下面H1标签结束错误并且属性也没有引号，浏览器在渲染中会进行修复</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1 id=ashun&gt;阿顺特烦恼&lt;h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>

<p>处理后的结果</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">	&lt;head&gt;&lt;/head&gt;</span><br><span class="line">	&lt;body&gt;</span><br><span class="line">    &lt;h1 id=&quot;ashun&quot;&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<h5 id="表格处理"><a href="#表格处理" class="headerlink" title="表格处理"></a>表格处理</h5><p>表格tabel中不允许有内容，浏览器在渲染过程中会进行处理</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;table&gt;</span><br><span class="line">  阿顺特烦恼</span><br><span class="line">  &lt;tr&gt;</span><br><span class="line">    &lt;th&gt;阿顺&lt;/th&gt;</span><br><span class="line">  &lt;/tr&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<p>渲染后会添加tbody标签并将table中的字符移出到table标签外部</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">阿顺特烦恼</span><br><span class="line">&lt;table&gt;</span><br><span class="line">  &lt;tbody&gt;</span><br><span class="line">  	&lt;tr&gt;</span><br><span class="line">      &lt;th&gt;阿顺&lt;/th&gt;</span><br><span class="line">    &lt;/tr&gt;</span><br><span class="line">  &lt;/tbody&gt;</span><br><span class="line">&lt;/table&gt;</span><br></pre></td></tr></table></figure>

<h5 id="标签移动"><a href="#标签移动" class="headerlink" title="标签移动"></a>标签移动</h5><p>所有内容要写在BODY标签中，下面的SCRIPT标签写在了BODY后面，浏览器渲染后也会进行处理</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  console.dir(&#x27;阿顺特烦恼&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>渲染后处理的结果</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    console.dir(&#x27;阿顺特烦恼&#x27;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="操作时机"><a href="#操作时机" class="headerlink" title="操作时机"></a>操作时机</h4><p>需要保证浏览器已经渲染了内容才可以读取的节点对象，下例将无法读取到节点对象</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.getElementById(&#x27;as&#x27;);</span><br><span class="line">  console.log(node); //null</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;h1 id=&quot;as&quot;&gt;阿顺特烦恼&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>不过我们可以将脚本通过事件放在页面渲染完执行</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  window.onload = () =&gt; &#123;</span><br><span class="line">    const node = document.getElementById(&#x27;as&#x27;);</span><br><span class="line">    console.log(node);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;h1 id=&quot;as&quot;&gt;阿顺特烦恼&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>或使用定时器将脚本设置为异步执行</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  setTimeout(() =&gt; &#123;</span><br><span class="line">   	const node = document.getElementById(&#x27;as&#x27;);</span><br><span class="line">    console.log(node)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;h1 id=&quot;as&quot;&gt;阿顺特烦恼&lt;/h1&gt;</span><br></pre></td></tr></table></figure>

<p>为脚本设置<code>type=&quot;module&quot;</code>,会延迟解析模块脚本</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type&#x3D;&quot;module&quot;&gt;</span><br><span class="line">   	const node &#x3D; document.getElementById(&#39;as&#39;);</span><br><span class="line">    console.log(node)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br><span class="line">&lt;h1 id&#x3D;&quot;as&quot;&gt;阿顺特烦恼&lt;&#x2F;h1&gt;</span><br></pre></td></tr></table></figure>

<p>或将脚本设置在外部文件并使用<code>defer/async</code>属性加载，即会等到DOM解析后迟延执行</p>
<ul>
<li>仅引入外部脚本时有效</li>
<li>多个外部脚本使用<code>defer/async</code>属性加载，不能够保证加载的前后顺序，当模块之间存在依赖时要注意</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script defer src=&quot;index.js&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;div id=&quot;as&quot;&gt;&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script async src&#x3D;&quot;index.js&quot;&gt;&lt;&#x2F;script&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;as&quot;&gt;&lt;&#x2F;div&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="节点对象"><a href="#节点对象" class="headerlink" title="节点对象"></a>节点对象</h4><p>JS中获取html内容的对象，称为DOM节点对象（node)，即然是对象就包括操作NODE的属性和方法</p>
<ul>
<li>包括12种类型的节点对象</li>
<li>常用了节点为document、标签元素节点、文本节点、注释节点</li>
<li>节点均继承自Node类型，所以拥有相同的属性或方法</li>
<li>document是DOM操作的起始节点</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;body id=&quot;as&quot;&gt;</span><br><span class="line">  &lt;!-- 阿顺特烦恼 --&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	// document节点 noteType为9</span><br><span class="line">  console.log(document.nodeType)</span><br><span class="line">  </span><br><span class="line">  // 第一个子节点为&lt;!DOCTYPE html&gt;，且nodetype为10</span><br><span class="line">  console.log(document.childNodes.item(0).nodeType)</span><br><span class="line">  </span><br><span class="line">  // body 是标签节点 nodeType为1</span><br><span class="line">  console.log(document.body.nodeType) </span><br><span class="line">  </span><br><span class="line">  // body的属性节点nodeType 为2</span><br><span class="line">  console.log(document.body.attributes[0].nodeType)</span><br><span class="line">  </span><br><span class="line">	// body的第一个节点为文本节点，nodeType为3</span><br><span class="line">  console.log(document.body.childNodes.item(0).nodeType)</span><br><span class="line">  </span><br><span class="line">  // body的第二个节点为注释，nodeType类型为8</span><br><span class="line">  console.log(document.body.childNodes[1].nodeType)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="原型链"><a href="#原型链" class="headerlink" title="原型链"></a>原型链</h4><p>在浏览器渲染过程中会将文档内容生成为不同的对象，来对下例中的h1标签进行讨论，其他节点情况相似</p>
<ul>
<li>不同类型节点由专有的构造函数创建对象</li>
<li>使用console.dir 可以打印出DOM节点对象结构</li>
<li>节点也是对象所以也具有JS对象的特征</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id=&quot;as&quot;&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function prototype(el) &#123;</span><br><span class="line">    console.log(el.__proto__)</span><br><span class="line">    el.__proto__ ? prototype(el.__proto__) : &#x27;&#x27;</span><br><span class="line">  &#125;</span><br><span class="line">  const node = document.getElementById(&#x27;as&#x27;)</span><br><span class="line">  prototype(node)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>最终得到的节点的原型链为</p>
<table>
<thead>
<tr>
<th>原型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Object</td>
<td>根对象</td>
</tr>
<tr>
<td>EventTarget</td>
<td>提供事件支持</td>
</tr>
<tr>
<td>Node</td>
<td>提供parentNode等节点操作方法</td>
</tr>
<tr>
<td>Element</td>
<td>提供getElementsByTagName、querySelector等方法</td>
</tr>
<tr>
<td>HTMLElement</td>
<td>所有元素的基础类，提供className、nodeName等方法</td>
</tr>
<tr>
<td>HTMLHeadingElement</td>
<td>Head标题元素类</td>
</tr>
</tbody></table>
<p>为标签元素和表单元素添加内容截取方法substr</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">    &lt;div id=&quot;as&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; value=&quot;ashuntefannao&quot; /&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">      class Utils &#123;</span><br><span class="line">      	//检查是否为表单元素</span><br><span class="line">        static isForm(node) &#123;</span><br><span class="line">          return node instanceof HTMLInputElement;</span><br><span class="line">        &#125;</span><br><span class="line">        //获取原型</span><br><span class="line">        static getPrototype(node) &#123;</span><br><span class="line">          let prototypes = [];</span><br><span class="line">          let test = node.__proto__;</span><br><span class="line">          if (test) &#123;</span><br><span class="line">            prototypes.push(test);</span><br><span class="line">            prototypes.push(...Utils.getPrototype(test));</span><br><span class="line">          &#125;</span><br><span class="line">          return prototypes;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      </span><br><span class="line">      Node.prototype.substr = function (m, n) &#123;</span><br><span class="line">        if (Utils.isForm(this)) &#123;</span><br><span class="line">          return this.value.substr(m, n);</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">          return this.innerText.substr(m, n);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;;</span><br><span class="line">      </span><br><span class="line">      //表单测试</span><br><span class="line">      let input = document.querySelector(&quot;input&quot;);</span><br><span class="line">      console.log(input.substr(0, 2));</span><br><span class="line">      console.log(Utils.getPrototype(input));</span><br><span class="line">      //标签测试</span><br><span class="line">      let div = document.querySelector(&quot;div&quot;);</span><br><span class="line">      console.log(div.substr(0, 2));</span><br><span class="line">      console.log(Utils.getPrototype(div));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="对象特征"><a href="#对象特征" class="headerlink" title="对象特征"></a>对象特征</h4><p>即然DOM与我们其他JS创建的对象特征相仿，所以也可以为DOM对象添加属性或方法。</p>
<p>对于系统应用的属性，应该明确含义不应该随意使用，比如ID是用于标识元素唯一属性，不能用于其他目地</p>
<ul>
<li>后会会讲到其他解决方案，来自定义属性，下面的直接修改ID属性是不建议的</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let as = document.getElementById(&quot;as&quot;);</span><br><span class="line">as.id = &quot;Ashun&quot;;</span><br><span class="line">console.log(as);</span><br></pre></td></tr></table></figure>

<p>title用于鼠标停留时显示提示文档也不应该用于其他目地</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;as&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let as = document.getElementById(&#x27;as&#x27;)</span><br><span class="line">  as.title = &#x27;Ashun&#x27;</span><br><span class="line">  console.log(as)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面是为对象合并属性的示例</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;as&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let as = document.getElementById(&#x27;as&#x27;)</span><br><span class="line">  Object.assign(as, &#123;</span><br><span class="line">    color: &#x27;red&#x27;,</span><br><span class="line">    change() &#123;</span><br><span class="line">      this.innerHTML = &#x27;Ashun&#x27;</span><br><span class="line">      this.style.color = this.color</span><br><span class="line">    &#125;,</span><br><span class="line">    onclick() &#123;</span><br><span class="line">      this.change()</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>合并对象属性更改样式</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;as&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let as = document.getElementById(&#x27;as&#x27;)</span><br><span class="line">  Object.assign(as.style, &#123;</span><br><span class="line">    color: &#x27;white&#x27;,</span><br><span class="line">    backgroundColor: &#x27;red&#x27;,</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="DOCUMENT"><a href="#DOCUMENT" class="headerlink" title="DOCUMENT"></a>DOCUMENT</h3><p>document是window对象的属性，是由HTMLDocument类实现的实例。</p>
<ul>
<li>document包含 DocumentType（唯一）或 html元素（唯一）或 comment等元素</li>
</ul>
<p>原型链中也包含Node，所以可以使用有关节点操作的方法如nodeType/NodeName等</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">console.dir(document.nodeType)</span><br><span class="line">console.dir(document.nodeName)</span><br></pre></td></tr></table></figure>

<blockquote>
<p>有关使用Document操作cookie与本地储存将会在相应章节中介绍</p>
</blockquote>
<h4 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h4><p>下面通过节点的<code>nodeType</code>来获取html元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">let html = [...document.childNodes].filter((node) =&gt; &#123;</span><br><span class="line">  if (node.nodeType === 1) &#123;</span><br><span class="line">    return node</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)[0]</span><br><span class="line">console.log(html)</span><br></pre></td></tr></table></figure>

<p>获取整个html元素：<code>document.documentElement</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(document.documentElement)</span><br></pre></td></tr></table></figure>

<h4 id="文档信息"><a href="#文档信息" class="headerlink" title="文档信息"></a>文档信息</h4><p>使用<code>title</code>获取和设置文档标题</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">//获取文档标题内容</span><br><span class="line">console.log(document.title)</span><br><span class="line"></span><br><span class="line">//设置文档标签内容</span><br><span class="line">document.title = &#x27;阿顺特烦恼-Ashun&#x27;</span><br></pre></td></tr></table></figure>

<p>获取<code>body</code>标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.body</span><br></pre></td></tr></table></figure>

<p>获取当前<code>URL</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(document.URL)</span><br></pre></td></tr></table></figure>

<p><code>domain</code>获取域名</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">document.domain</span><br></pre></td></tr></table></figure>

<p><code>referrer</code>获取来源地址</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">console.log(document.referrer)</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="节点属性"><a href="#节点属性" class="headerlink" title="节点属性"></a>节点属性</h3><p>不同类型的节点拥有不同属性，下面是节点属性的说明与示例</p>
<h4 id="nodeType"><a href="#nodeType" class="headerlink" title="nodeType"></a>nodeType</h4><p>nodeType指以数值返回节点类型</p>
<table>
<thead>
<tr>
<th>nodeType</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>元素节点</td>
</tr>
<tr>
<td>2</td>
<td>属性节点</td>
</tr>
<tr>
<td>3</td>
<td>文本节点</td>
</tr>
<tr>
<td>8</td>
<td>注释节点</td>
</tr>
<tr>
<td>9</td>
<td>document对象</td>
</tr>
</tbody></table>
<p>下面是节点nodeType的示例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div&gt;阿顺&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;shun&quot;&gt;SHUN&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;ashun&quot;&gt;&lt;!-- 阿顺特烦恼 --&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node &#x3D; document.querySelector(&#96;#app&#96;)</span><br><span class="line">  console.log(node.nodeType) &#x2F;&#x2F;1</span><br><span class="line">  console.log(node.firstChild);&#x2F;&#x2F; #text&#123;…&#125;</span><br><span class="line">  console.log(node.firstChild.nodeType) &#x2F;&#x2F;3</span><br><span class="line"></span><br><span class="line">  const as &#x3D; document.querySelector(&#39;.ashun&#39;)</span><br><span class="line">  console.log(as.childNodes[0].nodeType) &#x2F;&#x2F;8</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>当然也可以使用对象的原型检测节点类型</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let h1 = document.querySelector(&#x27;h1&#x27;)</span><br><span class="line">let p = document.querySelector(&#x27;p&#x27;)</span><br><span class="line">console.log(h1 instanceof HTMLHeadingElement) //true</span><br><span class="line">console.log(p instanceof HTMLHeadingElement) //false</span><br><span class="line">console.log(p instanceof Element) //true</span><br></pre></td></tr></table></figure>

<p>下面递归获取所有标签元素，并返回符合html嵌套结构的数据。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">  &lt;div id=&quot;as&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">      &lt;li&gt;</span><br><span class="line">        &lt;strong&gt;阿顺特烦恼&lt;/strong&gt;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">    &lt;p1&gt;ashun&lt;span&gt;ashuna&lt;/span&gt;&lt;/p1&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">				function childTag(node) &#123;</span><br><span class="line">          let result = [];</span><br><span class="line">          [...node.childNodes].map((v) =&gt; &#123;</span><br><span class="line">            if (v.nodeType === 1) &#123;</span><br><span class="line">              result.push(&#123; node: v, childs: childTag(v) &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">          return result;</span><br><span class="line">        &#125;</span><br><span class="line">        let as = document.getElementById(&quot;as&quot;);</span><br><span class="line">        console.log(childTag(as));</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>优化：当没有子节点时，childs为null</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">……</span><br><span class="line">result.push(&#123; node: v, childs: childTag(v).length ? childTag(v) : null &#125;);</span><br><span class="line">……</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="nodeName"><a href="#nodeName" class="headerlink" title="nodeName"></a>nodeName</h4><p>nodeName指定节点的名称</p>
<ul>
<li>获取值为大写形式</li>
</ul>
<table>
<thead>
<tr>
<th>nodeType种类</th>
<th>nodeName返回结果</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>元素名称如DIV</td>
</tr>
<tr>
<td>2</td>
<td>属性名称</td>
</tr>
<tr>
<td>3</td>
<td>#text</td>
</tr>
<tr>
<td>8</td>
<td>#comment</td>
</tr>
</tbody></table>
<p>下面来操作 nodeName</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div&gt;阿顺&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;shun&quot;&gt;SHUN&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;ashun&quot;&gt;&lt;!-- 阿顺特烦恼 --&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(`#app`)</span><br><span class="line">  console.log(node.nodeName) //DIV</span><br><span class="line">  console.log(node.firstChild.nodeName) //#text</span><br><span class="line"></span><br><span class="line">  const as = document.querySelector(&#x27;.ashun&#x27;)</span><br><span class="line">  console.log(as.childNodes[0].nodeName) //#comment</span><br><span class="line">  console.log(as.attributes.class.nodeName);//calss</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="tagName"><a href="#tagName" class="headerlink" title="tagName"></a>tagName</h4><p>nodeName可以获取不限于节点种类的名称，tagName仅能用于获取标签元素节点名称</p>
<ul>
<li>tagName存在于Element类的原型中</li>
<li>元素上使用tagName与nodeName无异</li>
<li>获取值为大写形式</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;ashun&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(&#x27;h1&#x27;)</span><br><span class="line">  console.log(node.tagName) //H1</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h4 id="nodeValue"><a href="#nodeValue" class="headerlink" title="nodeValue"></a>nodeValue</h4><p>使用nodeValue或data函数获取节点值，也可以使用节点的data属性获取节点内容</p>
<table>
<thead>
<tr>
<th>nodeType</th>
<th>nodeValue</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>null</td>
</tr>
<tr>
<td>2</td>
<td>属性值</td>
</tr>
<tr>
<td>3</td>
<td>文本内容</td>
</tr>
<tr>
<td>8</td>
<td>注释内容</td>
</tr>
</tbody></table>
<p>下面来看nodeValue的示例</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;as&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;ashun&quot;&gt;&lt;!-- 阿顺 --&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(`#app`)</span><br><span class="line">  console.log(node.nodeValue) //null</span><br><span class="line">  console.log(node.innerHTML)</span><br><span class="line"></span><br><span class="line">  const as = document.querySelector(&#x27;.as&#x27;)</span><br><span class="line">  console.log(as.firstChild.nodeValue) //ASHUN</span><br><span class="line"></span><br><span class="line">  const ashun = document.querySelector(&#x27;.ashun&#x27;)</span><br><span class="line">  console.log(ashun.childNodes[0].nodeValue) // 阿顺</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用data属性获取节点内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  阿顺特烦恼</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  console.log(app.childNodes[0].data)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="树状节点"><a href="#树状节点" class="headerlink" title="树状节点"></a>树状节点</h4><p>下面获取标签树状结构即多级标签结构，来加深一下nodeType/nodeName等知识</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    function element(node) &#123;</span><br><span class="line">        if (node.nodeType != 1) return</span><br><span class="line"></span><br><span class="line">        return Array.from(node.childNodes)</span><br><span class="line">            .filter(node =&gt; node.nodeType == 1)</span><br><span class="line">            .map(node =&gt; (&#123;</span><br><span class="line">                name: node.nodeName,</span><br><span class="line">                children: element(node),</span><br><span class="line">            &#125;))</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    let nodes = element(document.documentElement)</span><br><span class="line">    console.log(nodes)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="节点集合"><a href="#节点集合" class="headerlink" title="节点集合"></a>节点集合</h3><p>Nodelist与HTMLCollection都是包含多个节点标签的集合，大部分功能也是相同的。</p>
<ul>
<li><code>getElementsBy...</code>等方法、<code>node.children</code> 返回的是HTMLCollection</li>
<li><code>querySelectorAll </code>、<code>node.childNodes</code> 返回的是 NodeList</li>
<li>二者都是<code>类数组</code>结构，可直接通过下标访问dom，但不能直接使用Array的方法，二者都可以迭代，二者也存在差异</li>
</ul>
<p><strong>HTMLCollection</strong></p>
<ul>
<li>不可使用<code>for/each</code>遍历</li>
<li>只是元素集合，包含dom元素</li>
</ul>
<p><strong>NodeList</strong></p>
<ul>
<li>可使用<code>for/each</code>遍历</li>
<li>querySelectorAll 返回的虽然是 NodeList ，但是实际上是元素集合（只包含元素），并且是静态的（其他接口返回的HTMLCollection和NodeList都是live的）</li>
<li>NodeList是节点集合（可以包含元素，也可以包含文本节点）</li>
</ul>
<p>nodelist包含文本节点</p>
<img src="C:/Users/张佳顺/Desktop/study1.assets/image-20210411170505383.png" alt="image-20210411170505383" style="zoom:80%;" />

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;a&quot;&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;cc&quot;&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">console.log(document.getElementsByClassName(&#39;a&#39;)[0].childNodes);&#x2F;&#x2F;nodelist</span><br><span class="line">console.log(document.getElementsByClassName(&#39;a&#39;)[0].children);&#x2F;&#x2F;Htmlcollection</span><br></pre></td></tr></table></figure>

<p>HTMLCollection不可使用for/each遍历操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">let htmlCollection &#x3D; document.getElementsByClassName(&quot;shun&quot;);</span><br><span class="line">let nodeList &#x3D; document.querySelectorAll(&quot;.shun&quot;);</span><br><span class="line"></span><br><span class="line">nodeList.forEach((v) &#x3D;&gt; console.log(v));</span><br><span class="line">htmlCollection.forEach((v) &#x3D;&gt; console.log(v)); &#x2F;&#x2F;forEach is not a function</span><br></pre></td></tr></table></figure>



<h4 id="length"><a href="#length" class="headerlink" title="length"></a>length</h4><p>Nodelist与HTMLCollection包含length属性，记录了节点元素的数量</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;ashun&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  for (let i = 0; i &lt; nodes.length; i++) &#123;</span><br><span class="line">    console.log(nodes[i])</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="转换数组"><a href="#转换数组" class="headerlink" title="转换数组"></a>转换数组</h4><p>有时使用数组方法来操作节点集合，这就需要将节点集合转化为数组类型，有以下几种方式可以实现。</p>
<ol>
<li>使用call调用原型方法</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let elements = document.getElementsByTagName(&#x27;h1&#x27;)</span><br><span class="line">  console.log(elements)</span><br><span class="line">  let arr = Array.prototype.slice.call(elements, 0)</span><br><span class="line">  console.log(arr)</span><br><span class="line">  arr.map((item) =&gt; &#123;</span><br><span class="line">    item.style.color = &#x27;red&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>使用Array.from转换</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let elements = document.getElementsByTagName(&#x27;h1&#x27;)</span><br><span class="line">  console.log(elements)</span><br><span class="line">  console.log(Array.from(elements))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>下面使用点语法转换节点为数组</li>
</ol>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let elements = document.getElementsByTagName(&#x27;h1&#x27;)</span><br><span class="line">  console.log(elements)</span><br><span class="line">  ;[...elements].map((item) =&gt; &#123;</span><br><span class="line">    item.addEventListener(&#x27;click&#x27;, function () &#123;</span><br><span class="line">      this.style.textTransform = &#x27;uppercase&#x27;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="item"><a href="#item" class="headerlink" title="item"></a>item</h4><p>Nodelist与HTMLCollection提供了item()方法来根据索引获取元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;ashun&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  console.dir(nodes.item(0))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用数组索引获取更方便</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;ashun&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  console.dir(nodes[0])</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="namedItem"><a href="#namedItem" class="headerlink" title="namedItem"></a>namedItem</h4><p>HTMLCollection具有namedItem方法可以按name或id属性来获取元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div name=&quot;as&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  console.dir(nodes.namedItem(&#x27;as&#x27;))</span><br><span class="line">   console.dir(nodes.namedItem(&#x27;astfn&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>也可以使用属性方式获取</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div name=&quot;as&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  console.dir(nodes[&#x27;as&#x27;]);</span><br><span class="line">  console.dir(nodes.astfn)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>即HTMLCollection，可以通过属性的形式，获取对应 <code>索引、id属性、name属性</code> 的dom元素。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1 id&#x3D;&quot;astfn&quot;&gt;阿顺特烦恼&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;h1 name&#x3D;&quot;as&quot;&gt;ASHUN&lt;&#x2F;h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let items &#x3D; document.getElementsByTagName(&#39;h1&#39;)</span><br><span class="line">  console.log(items[0])</span><br><span class="line">  console.log(items[&quot;astfn&quot;])</span><br><span class="line">  console.log(items[&#39;as&#39;])</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="常用元素"><a href="#常用元素" class="headerlink" title="常用元素"></a>常用元素</h4><p>系统针对特定标签提供了快速选择的方式</p>
<p>下面展示的是获取所有a标签<code>document.links</code></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;a href=&quot;&quot;&gt;阿顺特烦恼&lt;/a&gt;</span><br><span class="line">  &lt;a href=&quot;&quot;&gt;Ashuntefannao&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.links;</span><br><span class="line">  console.dir(nodes)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>获取特定元素方法如下</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>document.documentElement</td>
<td>文档节点即html标签节点</td>
</tr>
<tr>
<td>document.body</td>
<td>body标签节点</td>
</tr>
<tr>
<td>document.head</td>
<td>head标签节点</td>
</tr>
<tr>
<td>document.links</td>
<td>超链接集合</td>
</tr>
<tr>
<td>document.anchors</td>
<td>所有锚点集合</td>
</tr>
<tr>
<td>document.forms</td>
<td>form表单集合</td>
</tr>
<tr>
<td>document.images</td>
<td>图片集合</td>
</tr>
</tbody></table>
<hr>
<h3 id="节点关系"><a href="#节点关系" class="headerlink" title="节点关系"></a>节点关系</h3><p>节点是父子级嵌套与前后兄弟关系，使用DOM提供的API可以获取这种关系的元素。</p>
<ul>
<li><strong>文本和注释也是节点，所以也在匹配结果中</strong></li>
<li>若只想获取dom元素，而不希望获得其它类型的节点，可以参考后续的<strong>元素关系</strong></li>
</ul>
<h4 id="基础知识-1"><a href="#基础知识-1" class="headerlink" title="基础知识"></a>基础知识</h4><p>节点是根据HTML内容产生的，所以也存在父子、兄弟、祖先、后代等节点关系，下例中的代码就会产生这种多重关系</p>
<ul>
<li>h1与ul是兄弟关系</li>
<li>span与li是父子关系</li>
<li>ul与span是后代关系</li>
<li>span与ul是祖先关系</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li&gt;</span><br><span class="line">    &lt;span&gt;Ashuntefannao&lt;/span&gt;</span><br><span class="line">    &lt;strong&gt;ashun&lt;/strong&gt;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>下面是通过节点关系获取相应元素的方法</p>
<table>
<thead>
<tr>
<th>节点属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>childNodes</td>
<td>获取所有子节点</td>
</tr>
<tr>
<td>parentNode</td>
<td>获取父节点</td>
</tr>
<tr>
<td>firstChild</td>
<td>子节点中第一个</td>
</tr>
<tr>
<td>lastChild</td>
<td>子节点中最后一个</td>
</tr>
<tr>
<td>nextSibling</td>
<td>下一个兄弟节点</td>
</tr>
<tr>
<td>previousSibling</td>
<td>上一个兄弟节点</td>
</tr>
</tbody></table>
<p>子节点集合与首、尾节点获取</p>
<ul>
<li>文本也是node所以也会在匹配当中</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;SHUN&lt;/div&gt;</span><br><span class="line">  &lt;div&gt;阿顺&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(`#app`)</span><br><span class="line">  console.log(node.childNodes) //所有子节点</span><br><span class="line">  console.log(node.firstChild) //第一个子节点是文本节点（换行符和空白字符）</span><br><span class="line">  console.log(node.lastChild) //最后一个子节点也是文本节点（换行符和空白字符）</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;astfn&quot; data&#x3D;&quot;as&quot;&gt;Ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;shun&quot;&gt;SHUN&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;ashun&quot;&gt;阿顺&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node &#x3D; app.querySelector(&#96;.shun&#96;)</span><br><span class="line">  console.log(node.parentNode) &#x2F;&#x2F;div#app</span><br><span class="line">  console.log(node.childNodes) &#x2F;&#x2F;文本节点</span><br><span class="line">  console.log(node.nextSibling) &#x2F;&#x2F;下一个兄弟节点是文本节点（换行符和空白字符）</span><br><span class="line">  console.log(node.previousSibling) &#x2F;&#x2F;上一个节点也是文本节点（换行符和空白字符）</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>document是顶级节点html标签的父节点是document</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  console.log(document.documentElement.parentNode === document)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下例是查找元素的所有父节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;as&quot;&gt;ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function parentNodes(node) &#123;</span><br><span class="line">    let nodes &#x3D; []</span><br><span class="line">    while ((node &#x3D; node.parentNode)) nodes.push(node)</span><br><span class="line">    return nodes</span><br><span class="line">  &#125;</span><br><span class="line">  const el &#x3D; document.getElementById(&#39;as&#39;)</span><br><span class="line">  const nodes &#x3D; parentNodes(el)</span><br><span class="line">  console.log(nodes)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>获取所有的后代元素SPAN的内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;span&gt;Ashuntefannao&lt;/span&gt;</span><br><span class="line">  &lt;h2&gt;</span><br><span class="line">    &lt;span&gt;ASHUN&lt;/span&gt;</span><br><span class="line">  &lt;/h2&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function getChildDom(parent, dom) &#123;</span><br><span class="line">  	let doms = [];</span><br><span class="line">  	for (let elem of parent.childNodes) &#123;</span><br><span class="line">   		if (elem.nodeName === dom.toUpperCase()) doms.push(elem);</span><br><span class="line">    	doms = doms.concat(getChildDom(elem, dom));</span><br><span class="line">      // doms.push(...getChildDom(elem, dom));</span><br><span class="line">  	&#125;</span><br><span class="line">   	return doms;</span><br><span class="line">  &#125;</span><br><span class="line">  const app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  const nodes = getChildNodeByName(app, &#x27;span&#x27;)</span><br><span class="line">  console.log(nodes)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="元素关系"><a href="#元素关系" class="headerlink" title="元素关系"></a>元素关系</h3><p>使用childNodes等获取的节点<code>包括文本与注释</code>，但这不是我们常用的，系统也提供了只操作元素的方法。</p>
<table>
<thead>
<tr>
<th>节点属性</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>parentElement</td>
<td>获取父元素</td>
</tr>
<tr>
<td>children</td>
<td>获取所有子元素</td>
</tr>
<tr>
<td>childElementCount</td>
<td>子标签元素的数量</td>
</tr>
<tr>
<td>firstElementChild</td>
<td>第一个子标签</td>
</tr>
<tr>
<td>lastElementChild</td>
<td>最后一个子标签</td>
</tr>
<tr>
<td>previousElementSibling</td>
<td>上一个兄弟标签</td>
</tr>
<tr>
<td>nextElementSibling</td>
<td>下一个兄弟标签</td>
</tr>
<tr>
<td>contains</td>
<td>返回布尔值，判断传入的节点是否为该节点的后代节点</td>
</tr>
</tbody></table>
<p>以下实例展示怎样通过元素关系获取元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;shun&quot;&gt;SHUN&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;ashun&quot;&gt;&lt;!-- 阿顺 --&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(`#app`)</span><br><span class="line">  console.log(app.children) //所有子元素</span><br><span class="line">  console.log(app.firstElementChild) //第一个子元素 div.astfn</span><br><span class="line">  console.log(app.lastElementChild) //最后一个子元素 div.ashun</span><br><span class="line"></span><br><span class="line">  const as = document.querySelector(&#x27;.ashun&#x27;)</span><br><span class="line">  console.log(as.parentElement) //父元素 div#app</span><br><span class="line"></span><br><span class="line">  console.log(as.previousElementSibling) //上一个兄弟元素 div.astfn</span><br><span class="line">  console.log(as.nextElementSibling) //下一个兄弟元素 div.ashun</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>html标签的父节点是document，但父标签节点不存在</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">  console.log(document.documentElement.parentNode === document) //true</span><br><span class="line">  console.log(document.documentElement.parentElement) //null</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="选取节点"><a href="#选取节点" class="headerlink" title="选取节点"></a>选取节点</h3><p>系统提供了丰富的选择节点（NODE）的操作方法，下面我们来一一说明</p>
<h4 id="getElementById"><a href="#getElementById" class="headerlink" title="getElementById"></a>getElementById</h4><p>使用ID选择是非常方便的选择具有ID值的节点元素，但注意ID应该是唯一的</p>
<ul>
<li>只能通过document对象调用</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;as&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.getElementById(&#x27;as&#x27;)</span><br><span class="line">  console.dir(node)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面自定义函数来支持批量按ID选择元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;as&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  function getByElementIds(ids) &#123;</span><br><span class="line">    return ids.map((id) =&gt; document.getElementById(id))</span><br><span class="line">  &#125;</span><br><span class="line">  let nodes = getByElementIds([&#x27;as&#x27;, &#x27;app&#x27;])</span><br><span class="line">  console.dir(nodes)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>拥有ID的元素可做为WINDOW的属性进行访问</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  console.log(app.innerHTML)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>如果声明了变量这种访问方式将无效，所以并不建议使用这种方式访问对象</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = &#x27;ashun&#x27;</span><br><span class="line">  console.log(app.innerHTML)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>getElementById只能通过document访问，不能通过元素读取拥有ID的子元素，下面的操作将产生错误</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">  &lt;div id=&quot;as&quot;&gt;阿顺&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  const node = app.getElementById(&#x27;as&#x27;) //app.getElementById is not a function</span><br><span class="line">  console.log(node)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="getElementByName"><a href="#getElementByName" class="headerlink" title="getElementByName"></a>getElementByName</h4><p>使用getElementByName获取<strong>设置了name属性的元素</strong>，虽然在DIV等元素上同样有效，但一般用来对表单元素进行操作时使用。</p>
<ul>
<li>返回NodeList节点列表对象</li>
<li>NodeList顺序为元素在文档中的顺序</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;input type=&quot;text&quot; name=&quot;username&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const div = document.getElementsByName(&#x27;astfn&#x27;)</span><br><span class="line">  console.dir(div)</span><br><span class="line">  const input = document.getElementsByName(&#x27;username&#x27;)</span><br><span class="line">  console.dir(input)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="getElementsByTagName"><a href="#getElementsByTagName" class="headerlink" title="getElementsByTagName"></a>getElementsByTagName</h4><p>使用getElementsByTagName用于按标签名获取元素</p>
<ul>
<li>返回HTMLCollection元素集合</li>
<li>是不区分大小的获取</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const divs = document.getElementsByTagName(&#x27;DIV&#x27;)</span><br><span class="line">  console.dir(divs)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>通配符</strong></p>
<p>可以使用通配符 ***** 获取所有元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;*&#x27;)</span><br><span class="line">  console.dir(nodes)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="getElementsByClassName"><a href="#getElementsByClassName" class="headerlink" title="getElementsByClassName"></a>getElementsByClassName</h4><p>getElementsByClassName用于按class样式属性值获取元素集合</p>
<ul>
<li>设置多个值时顺序无关，指包含这些class属性的元素</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;astfn shun title&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;shun&quot;&gt;SHUN&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByClassName(&#x27;shun&#x27;)</span><br><span class="line">  console.log(nodes.length) //2</span><br><span class="line"></span><br><span class="line">  //查找包含class属性包括 astfn 与 shun 的元素</span><br><span class="line">  const tags = document.getElementsByClassName(&#x27;astfn shun&#x27;)</span><br><span class="line">  console.log(tags.length) //1</span><br></pre></td></tr></table></figure>



<h3 id="遍历节点"><a href="#遍历节点" class="headerlink" title="遍历节点"></a>遍历节点</h3><h4 id="length-1"><a href="#length-1" class="headerlink" title="length"></a>length</h4><p>结合节点列表的length属性，使用for遍历</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div name=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div name=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  for (let i = 0; i &lt; nodes.length; i++) &#123;</span><br><span class="line">    console.log(nodes[i])</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="forEach"><a href="#forEach" class="headerlink" title="forEach"></a>forEach</h4><p>Nodelist节点列表可以使用forEach来进行遍历，但HTMLCollection则不可以</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div name=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.querySelectorAll(&#x27;div&#x27;)</span><br><span class="line">  nodes.forEach((node, key) =&gt; &#123;</span><br><span class="line">    console.log(node)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="map"><a href="#map" class="headerlink" title="map"></a>map</h4><p>节点集合对象不是Array，原型中不存在map方法，但可以借用Array的原型map方法实现遍历</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div name=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.querySelectorAll(&#x27;div&#x27;)</span><br><span class="line">  Array.prototype.map.call(nodes, (node, index) =&gt; &#123;</span><br><span class="line">    console.log(node, index)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="Array-from"><a href="#Array-from" class="headerlink" title="Array.from"></a>Array.from</h4><p>Array.from用于将类数组转为组件，并提供第二个迭代函数。所以可以借用Array.from实现遍历</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div name=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  Array.from(nodes, (node, index) =&gt; &#123;</span><br><span class="line">    console.log(node, index)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>也可以先使用Array.from将节点列表转为Array，再使用Array的方法</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;astfn&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div name&#x3D;&quot;ashun&quot;&gt;ASHUN&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes &#x3D; document.getElementsByTagName(&#39;div&#39;)</span><br><span class="line">  let astfn&#x3D;Array.from(nodes).filter(v&#x3D;&gt;v.id&#x3D;&#x3D;&#x3D;&quot;astfn&quot;);</span><br><span class="line">  console.log(astfn)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="forOf"><a href="#forOf" class="headerlink" title="forOf"></a>forOf</h4><p>节点集合是类数组的可迭代对象所以可以使用for…of进行遍历</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;astfn&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;div name=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  for (const item of nodes) &#123;</span><br><span class="line">    console.log(item)</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="迭代器"><a href="#迭代器" class="headerlink" title="迭代器"></a>迭代器</h4><p>也可使用<code>for/of</code>结合Object迭代器进行遍历</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;astfn&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div name&#x3D;&quot;ashun&quot;&gt;ASHUN&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes &#x3D; document.getElementsByTagName(&#39;div&#39;)</span><br><span class="line">  for (let [key, dom] of Object.entries(nodes)) &#123;</span><br><span class="line">        console.log(key, dom);</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (let key of Object.keys(nodes)) console.log(key);</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">for (let dom of Object.values(nodes)) console.log(dom);</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="样式选择器"><a href="#样式选择器" class="headerlink" title="样式选择器"></a>样式选择器</h3><p>在CSS中可以通过样式选择器修饰元素样式，在DOM操作中也可以使用这种方式查找元素。使用过jQuery库的朋友，应该对这种选择方式印象深刻。</p>
<p>使用getElementsByTagName等方式选择元素不够灵活，建议使用下面的样式选择器操作，更加方便灵活</p>
<h4 id="querySelectorAll"><a href="#querySelectorAll" class="headerlink" title="querySelectorAll"></a>querySelectorAll</h4><p>使用querySelectorAll根据CSS选择器获取Nodelist节点列表</p>
<ul>
<li><code>获取的NodeList节点列表是静态的，添加或删除元素后不变</code></li>
<li>可以链式调用，即 既是document的接口，也是dom元素的接口。可以获取对应dom的子孙dom</li>
</ul>
<p>获取所有div元素</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;title&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;astfn&quot;&gt;Ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;ashun&quot;&gt;ASHUN&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app &#x3D; document.getElementById(&#39;app&#39;)</span><br><span class="line">  const nodes &#x3D; app.querySelectorAll(&#39;div&#39;)</span><br><span class="line">  console.log(nodes.length) &#x2F;&#x2F;2</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>可以在其中应用css选择器规则，获取对应的节点列表</p>
<ul>
<li>获取id为app的dom中class为ashun的子节点</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;title&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;astfn&quot; class&#x3D;&quot;ashun&quot;&gt;Ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;ashun&quot;&gt;ASHUN&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"> let nodes&#x3D;document.querySelectorAll(&quot;#app .ashun&quot;);</span><br><span class="line"> console.log(nodes.length);&#x2F;&#x2F;2</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<ul>
<li>根据属性选择器获取元素</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class&#x3D;&quot;title&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;</span><br><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;astfn&quot; data&#x3D;&quot;as&quot;&gt;Ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;ashun&quot;&gt;ASHUN&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"> let nodes&#x3D;document.querySelectorAll(&quot;#app [data&#x3D;&#39;as&#39;]&quot;);</span><br><span class="line"> console.log(nodes[0]);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="querySelector"><a href="#querySelector" class="headerlink" title="querySelector"></a>querySelector</h4><p>querySelector使用CSS选择器获取一个元素，下面是根据属性获取单个元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id=&quot;astfn&quot; data=&quot;as&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">	&lt;div class=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = app.querySelector(`#astfn[data=&#x27;as&#x27;]`)</span><br><span class="line">  console.log(node)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>若存在多个相同属性的元素，则只获取第一个</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div id&#x3D;&quot;astfn&quot; class&#x3D;&quot;ashun&quot;&gt;Ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line">	&lt;div class&#x3D;&quot;ashun&quot;&gt;ASHUN&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node &#x3D; app.querySelector(&#96;.ashun&#96;)</span><br><span class="line">  console.log(node)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="matches"><a href="#matches" class="headerlink" title="matches"></a>matches</h4><p><code>node.matches(cssSelector)</code>用于检测<strong>某元素</strong>是否与 <strong>指定的样式选择器匹配</strong>，下面过滤掉所有name属性的LI元素。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;li&gt;Ashuntefannao&lt;/li&gt;</span><br><span class="line">  &lt;li&gt;ASHUN&lt;/li&gt;</span><br><span class="line">  &lt;li name=&quot;as&quot;&gt;阿顺&lt;/li&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  const nodes = [...app.querySelectorAll(&#x27;li&#x27;)].filter((node) =&gt; &#123;</span><br><span class="line">    return !node.matches(`[name]`)</span><br><span class="line">  &#125;)</span><br><span class="line">  console.log(nodes)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="closest"><a href="#closest" class="headerlink" title="closest"></a>closest</h4><p>查找最近的符合选择器的祖先元素（包括自身），下例查找父级拥有 <code>.comment</code>类的元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;comment&quot;&gt;</span><br><span class="line">  &lt;ul class=&quot;comment&quot;&gt;</span><br><span class="line">    &lt;li&gt;阿顺特烦恼&lt;/li&gt;</span><br><span class="line">  &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const li = document.getElementsByTagName(&#x27;li&#x27;)[0]</span><br><span class="line">  const node = li.closest(`.comment`)</span><br><span class="line">  console.log(node)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<hr>
<h3 id="动态与静态获取"><a href="#动态与静态获取" class="headerlink" title="动态与静态获取"></a>动态与静态获取</h3><ul>
<li><p>下面讨论的是 元素/节点<strong>集合</strong> 的动态与静态，而不是某个元素/节点的动态与静态。</p>
</li>
<li><p>获取某个元素都是静态的。</p>
</li>
</ul>
<p>通过 getElementsByTagname 等getElementsBy… 函数获取的Nodelist与HTMLCollection集合是动态的，即有元素添加或移动操作将实时反映最新状态。</p>
<ul>
<li>使用getElement…返回的都是动态的集合</li>
<li>使用querySelectorAll返回的是静态集合</li>
</ul>
<h4 id="动态特性"><a href="#动态特性" class="headerlink" title="动态特性"></a>动态特性</h4><p>下例中通过按钮动态添加元素后，获取的元素集合是动态的，而不是上次获取的固定快照。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;button id=&quot;add&quot;&gt;添加元素&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let elements = document.getElementsByTagName(&#x27;h1&#x27;)</span><br><span class="line">  console.log(elements)</span><br><span class="line">  let button = document.querySelector(&#x27;#add&#x27;)</span><br><span class="line">  button.addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span><br><span class="line">    document.querySelector(&#x27;body&#x27;).insertAdjacentHTML(&#x27;beforeend&#x27;, &#x27;&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;&#x27;)</span><br><span class="line">    console.log(elements)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt; </span><br></pre></td></tr></table></figure>

<p>document.querySelectorAll获取的集合是静态的</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺&lt;/h1&gt;</span><br><span class="line">&lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;button id=&quot;add&quot;&gt;添加元素&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let elements = document.querySelectorAll(&#x27;h1&#x27;)</span><br><span class="line">  </span><br><span class="line">  console.log(elements.length)</span><br><span class="line">  let button = document.querySelector(&#x27;#add&#x27;)</span><br><span class="line">  button.addEventListener(&#x27;click&#x27;, () =&gt; &#123;</span><br><span class="line">    document.querySelector(&#x27;body&#x27;).insertAdjacentHTML(&#x27;beforeend&#x27;, &#x27;&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;&#x27;)</span><br><span class="line">    console.log(elements.length)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="使用静态"><a href="#使用静态" class="headerlink" title="使用静态"></a>使用静态</h4><p>如果需要保存静态集合，则需要对集合进行复制</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;astfn&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;ashun&quot;&gt;ASHUN&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const nodes = document.getElementsByTagName(&#x27;div&#x27;)</span><br><span class="line">  const clone = Array.prototype.slice.call(nodes)</span><br><span class="line">  console.log(nodes.length);//2</span><br><span class="line">  document.body.appendChild(document.createElement(&#x27;div&#x27;))</span><br><span class="line">  console.log(nodes.length);//3</span><br><span class="line">  console.log(clone.length);//2</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="标准属性"><a href="#标准属性" class="headerlink" title="标准属性"></a>标准属性</h3><p>即在js中能够直接通过属性的方式，访问/操作DOM元素的属性。元素的标准属性具有相对应的DOM对象属性</p>
<ul>
<li>操作属性<code>区分大小写</code></li>
<li>多个单词属性命名规则为第一个单词小写，其他单词驼峰式命名</li>
<li>属性值是多类型并不全是字符串，也可能是对象等</li>
<li>事件处理程序属性值为函数</li>
<li>style属性为CSSStyleDeclaration对象</li>
<li>DOM对象不同生成的属性也不同</li>
</ul>
<h4 id="属性别名"><a href="#属性别名" class="headerlink" title="属性别名"></a>属性别名</h4><p>有些属性名与JS关键词冲突，系统已经起了别名</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>别名</th>
</tr>
</thead>
<tbody><tr>
<td>class</td>
<td>className</td>
</tr>
<tr>
<td>for</td>
<td>htmlFor</td>
</tr>
</tbody></table>
<h4 id="操作属性"><a href="#操作属性" class="headerlink" title="操作属性"></a>操作属性</h4><p>元素的标准属性可以直接进行操作，下面是直接设置元素的className</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;astfn&quot; data=&quot;as&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;ashun&quot;&gt;Ashun&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(`#app`)</span><br><span class="line">  app.className = &#x27;astfn ashun&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面设置图像元素的标准属性</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;img src=&quot;&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let img = document.images[0]</span><br><span class="line">  img.src = &#x27;https://www.Ashuntefannao.com/icon.jpg&#x27;</span><br><span class="line">  img.alt = &#x27;阿顺特烦恼&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用hidden隐藏元素</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.addEventListener(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    this.hidden = true</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>通过style属性改变行内样式</p>
<ul>
<li>js操作Dom属性时，多个单词属性命名规则为第一个单词小写，其他单词驼峰式命名</li>
<li>js中的背景颜色<code>backgroundColor</code>,css中<code>backgorund-color</code></li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app &#x3D; document.querySelector(&#39;#app&#39;)</span><br><span class="line">  app.addEventListener(&#39;click&#39;, function () &#123;</span><br><span class="line">    this.style.backgroundColor &#x3D; &quot;red&quot;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="多类型值"><a href="#多类型值" class="headerlink" title="多类型值"></a>多类型值</h4><p>大部分属性值是都是字符串，但并不是全部，下例中需要转换为数值后进行数据运算</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;number&quot; name=&quot;age&quot; value=&quot;88&quot; /&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let input = document.getElementsByName(&#x27;age&#x27;).item(0)</span><br><span class="line">  input.value = parseInt(input.value) + 100</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面表单checked属性值为Boolean类型</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;label for=&quot;hot&quot;&gt; &lt;input id=&quot;hot&quot; type=&quot;checkbox&quot; name=&quot;hot&quot; /&gt;热门 &lt;/label&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(`[name=&#x27;hot&#x27;]`)</span><br><span class="line">  node.addEventListener(&#x27;change&#x27;, function () &#123;</span><br><span class="line">    console.log(this.checked)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>属性值<code>并非</code>都与HTML定义的值一样，下面返回的href属性值是完整链接</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;#Ashuntefannao&quot; id=&quot;home&quot;&gt;阿顺特烦恼&lt;/a&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(`#home`)</span><br><span class="line">  console.log(node.href)	</span><br><span class="line">  //http://127.0.0.1:5500/dom.html#Ashuntefannao</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="元素特征"><a href="#元素特征" class="headerlink" title="元素特征"></a>元素特征</h3><h4 id="基本方法"><a href="#基本方法" class="headerlink" title="基本方法"></a>基本方法</h4><p>对于标准的属性可以直接通过DOM属性的方式进行操作，但对于标签的 非标准的定制属性 则不可以。但JS提供了方法来控制标准或非标准的属性</p>
<p>可以理解为元素的属性分两个地方保存，DOM属性中记录标准属性，特征中记录标准和定制属性</p>
<ul>
<li>使用特征操作时属性名称不区分大小写</li>
<li>特征值都为字符串类型</li>
</ul>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>getAttribute(“prop”)</td>
<td>获取属性值</td>
</tr>
<tr>
<td>setAttribute(“prop”,”value”)</td>
<td>设置属性/添加属性</td>
</tr>
<tr>
<td>removeAttribute(“prop”)</td>
<td>删除属性</td>
</tr>
<tr>
<td>hasAttribute(“prop”)</td>
<td>属性检测</td>
</tr>
</tbody></table>
<p>特征是可迭代对象，下面使用for…of来进行遍历操作</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;body&gt;</span><br><span class="line">&lt;button id&#x3D;&quot;add&quot; class&#x3D;&quot;add&quot;&gt;添加元素&lt;&#x2F;button&gt;</span><br><span class="line">&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">     let attrs &#x3D; document.querySelector(&quot;#add&quot;).attributes;</span><br><span class="line">      console.log(attrs);	&#x2F;&#x2F;NamedNodeMap &#123;…&#125;</span><br><span class="line">      for (const &#123; name, value &#125; of nameNodeMap) &#123;</span><br><span class="line">        console.log(name, value);</span><br><span class="line">      &#125;</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>使用<code>getAttribute</code>获取的属性值都为<code>字符串</code>，所以若要获取数值类型需要进行转换</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;number&quot; name=&quot;age&quot; value=&quot;88&quot; /&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let input = document.getElementsByName(&#x27;age&#x27;).item(0)</span><br><span class="line">  let value = input.getAttribute(&#x27;value&#x27;) * 1 + 100</span><br><span class="line">  input.setAttribute(&#x27;value&#x27;, value)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用removeAttribute删除元素的class属性，并通过hasAttribute进行检测删除结果</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;ashun&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let as = document.querySelector(&#x27;.ashun&#x27;)</span><br><span class="line">  as.removeAttribute(&#x27;class&#x27;)</span><br><span class="line">  console.log(as.hasAttribute(&#x27;class&#x27;)) //false</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>特征值与HTML定义的值是<code>一致的</code>，这和标准属性进行访问是不同的</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;a href=&quot;#Ashuntefannao&quot; id=&quot;home&quot;&gt;后盾人&lt;/a&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const node = document.querySelector(`#home`)</span><br><span class="line">  </span><br><span class="line">  // http://127.0.0.1:5500/dom.html#Ashuntefannao</span><br><span class="line">  console.log(node.href)</span><br><span class="line">  </span><br><span class="line">  // #Ashuntefannao</span><br><span class="line">  console.log(node.getAttribute(&#x27;href&#x27;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="attributes"><a href="#attributes" class="headerlink" title="attributes"></a>attributes</h4><p>元素提供了attributes 属性可以只读的获取元素的属性</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;astfn&quot; data-content=&quot;阿顺&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let astfn = document.querySelector(&#x27;.astfn&#x27;)；</span><br><span class="line">  console.log(astfn.attributes);</span><br><span class="line">  console.dir(astfn.attributes[&#x27;class&#x27;].nodeValue) //astfn</span><br><span class="line">  console.dir(astfn.attributes[&#x27;data-content&#x27;].nodeValue) //阿顺</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="自定义特征"><a href="#自定义特征" class="headerlink" title="自定义特征"></a>自定义特征</h4><p>虽然可以随意定义特征并使用getAttribute等方法管理，但很容易造成与标签的现在或未来属性重名。建议使用以data-为前缀的自定义特征处理，针对这种定义方式JS也提供了接口方便操作。</p>
<ul>
<li>元素中以data-为前缀的属性会添加到内置的data属性集中</li>
<li>使用<code>dom.dataset</code>可获取对应dom的data属性集</li>
<li>改变dataset的值也会影响到元素上</li>
</ul>
<p>下面演示使用属性集设置DIV标签内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;astfn&quot; data-content=&quot;阿顺特烦恼&quot; data-color=&quot;red&quot;&gt;ashun&lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let astfn = document.querySelector(&#x27;.astfn&#x27;)</span><br><span class="line">  let content = astfn.dataset.content</span><br><span class="line">  console.log(content) //阿顺特烦恼</span><br><span class="line">  astfn.innerHTML = `&lt;span style=&quot;color:$&#123;astfn.dataset.color&#125;&quot;&gt;$&#123;content&#125;&lt;/span&gt;`</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>多个单词的特征使用驼峰命名方式读取</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div class=&quot;astfn&quot; data-title-color=&quot;red&quot;&gt;ashun&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let astfn = document.querySelector(&#x27;.astfn&#x27;)</span><br><span class="line">  astfn.innerHTML = `</span><br><span class="line">    &lt;span style=&quot;color:$&#123;astfn.dataset.titleColor&#125;&quot;&gt;$&#123;astfn.innerHTML&#125;&lt;/span&gt;</span><br><span class="line">  `</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>改变dataset值也会影响到页面元素上</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">div class=&quot;astfn&quot; data-title-color=&quot;red&quot;&gt;ashun&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let astfn = document.querySelector(&#x27;.astfn&#x27;)</span><br><span class="line">  astfn.addEventListener(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    this.dataset.titleColor = [&#x27;red&#x27;, &#x27;green&#x27;, &#x27;blue&#x27;][Math.floor(Math.random() * 3)]</span><br><span class="line">    this.style.color = this.dataset.titleColor</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="属性同步"><a href="#属性同步" class="headerlink" title="属性同步"></a>属性同步</h4><p>特征和标准属性，是记录元素属性的两个不同场所，<code>大部分更改会进行同步操作</code>。</p>
<ul>
<li>有些情况，通过标准属性更改，不能同步到元素特征，但元素特征的更改，能够同步到标准属性</li>
<li>推荐使用属性特征方法</li>
</ul>
<p>下面使用属性更改了className，会自动同步到了特征集中，反之亦然</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;red&quot;&gt;ASHUNTEFANNAO&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.className = &#x27;astfn&#x27;</span><br><span class="line">  console.log(app.getAttribute(&#x27;class&#x27;)) //astfn</span><br><span class="line">  app.setAttribute(&#x27;class&#x27;, &#x27;blue&#x27;)</span><br><span class="line">  console.log(app.className) //blue</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>下面对input值使用标准属性设置，<strong>但并没有同步到特征</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; name=&quot;package&quot; value=&quot;Ashuntefannao&quot; /&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const package = document.querySelector(`[name=&#x27;package&#x27;]`)</span><br><span class="line">  package.value = &#x27;阿顺&#x27;</span><br><span class="line">  console.log(package.getAttribute(&#x27;value&#x27;))//Ashuntefannao</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>但改变input的特征value会同步到DOM对象的标准属性</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;input type=&quot;text&quot; name=&quot;package&quot; value=&quot;Ashuntefannao&quot; /&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const package = document.querySelector(`[name=&#x27;package&#x27;]`)</span><br><span class="line">  package.setAttribute(&#x27;value&#x27;, &#x27;阿顺&#x27;)</span><br><span class="line">  console.log(package.value) //阿顺</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="创建节点"><a href="#创建节点" class="headerlink" title="创建节点"></a>创建节点</h3><p>创建节点的就是构建出DOM对象，然后根据需要添加到其他节点中</p>
<h4 id="createTextNode"><a href="#createTextNode" class="headerlink" title="createTextNode"></a>createTextNode</h4><p>创建文本节点并添加到元素中</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let text = document.createTextNode(&#x27;阿顺特烦恼&#x27;)</span><br><span class="line">  app.append(text)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="createElement"><a href="#createElement" class="headerlink" title="createElement"></a>createElement</h4><p>使用createElement方法可以标签节点，下例创建span标签新节点并添加到div#app</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let span = document.createElement(&#x27;span&#x27;)</span><br><span class="line">  span.innerHTML = &#x27;Ashun&#x27;</span><br><span class="line">  app.append(span)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用PROMISE结合节点操作来加载外部JAVASCRIPT文件</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">function js(file) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    let js = document.createElement(&#x27;script&#x27;)</span><br><span class="line">    js.type = &#x27;text/javascript&#x27;</span><br><span class="line">    js.src = file</span><br><span class="line">    js.onload = resolve</span><br><span class="line">    js.onerror = reject</span><br><span class="line">    document.head.appendChild(js)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">js(&#x27;11.js&#x27;)</span><br><span class="line">  .then(() =&gt; console.log(&#x27;加载成功&#x27;))</span><br><span class="line">  .catch((error) =&gt; console.log(`$&#123;error.target.src&#125; 加载失败`))</span><br></pre></td></tr></table></figure>

<p>使用同样的逻辑来实现加载CSS文件</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function css(file) &#123;</span><br><span class="line">  return new Promise((resolve, reject) =&gt; &#123;</span><br><span class="line">    let css = document.createElement(&#x27;link&#x27;)</span><br><span class="line">    css.rel = &#x27;stylesheet&#x27;</span><br><span class="line">    css.href = file</span><br><span class="line">    css.onload = resolve</span><br><span class="line">    css.onerror = reject</span><br><span class="line">    document.head.appendChild(css)</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line">css(&#x27;1.css&#x27;).then(() =&gt; &#123;</span><br><span class="line">  console.log(&#x27;加载成功&#x27;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h4 id="cloneNode-amp-importNode"><a href="#cloneNode-amp-importNode" class="headerlink" title="cloneNode&amp;importNode"></a>cloneNode&amp;importNode</h4><p>使用cloneNode和document.importNode用于复制节点对象操作</p>
<ul>
<li>cloneNode是节点的方法：<code>dom.cloneNode(boolean)</code></li>
<li>cloneNode 参数为true时递归复制子节点即深拷贝</li>
<li>importNode是documet对象方法：<code>document.importNode(elem,boolean)</code></li>
</ul>
<p><code>dom.cloneNode(true)</code>复制div#app节点及其子节点，并添加到body元素中</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;span&gt;阿顺特烦恼&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let newApp = app.cloneNode(true)</span><br><span class="line">  document.body.appendChild(newApp)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><code>dom.cloneNode(false)</code>只clone目标节点本身,不递归复制子节点</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;&lt;span&gt;阿顺特烦恼&lt;&#x2F;span&gt;&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">	const node &#x3D; document.querySelector(&#96;#app&#96;);</span><br><span class="line">	let newNode &#x3D; node.cloneNode(false);</span><br><span class="line">	console.log(newNode);</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p><code>document.importNode(elem,boolean)</code>方法是低版本IE浏览器不支持的，也是复制节点对象的方法</p>
<ul>
<li>第一个参数为节点对象</li>
<li>第二个参数为true时递归复制</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;span&gt;阿顺特烦恼&lt;/span&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let newApp = document.importNode(app, true)</span><br><span class="line">  document.body.appendChild(newApp)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>





<hr>
<h3 id="节点内容"><a href="#节点内容" class="headerlink" title="节点内容"></a>节点内容</h3><h4 id="innerHTML"><a href="#innerHTML" class="headerlink" title="innerHTML"></a>innerHTML</h4><p>inneHTML用于向标签中添加html内容，同时触发浏览器的解析器<code>重绘DOM</code>。</p>
<p>下例使用innerHTML获取和设置div内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;span&gt;阿顺特烦恼&lt;/span&gt;</span><br><span class="line">  &lt;div class=&quot;as&quot;&gt;Ashun&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  console.log(app.innerHTML)</span><br><span class="line"></span><br><span class="line">  app.innerHTML = &#x27;&lt;h1&gt;阿顺&lt;/h1&gt;&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>重绘节点</strong></p>
<p>使用innertHTML操作会重绘元素，下面在点击第二次就没有效果了</p>
<ul>
<li>因为对#app内容进行了重绘，即删除原内容然后设置新内容</li>
<li>重绘后产生的button对象<code>也没有了事件</code></li>
<li>重绘后又产生了新img对象，所以在控制台中可看到新图片在加载</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;button&gt;Ashuntefannao&lt;/button&gt;</span><br><span class="line">  &lt;img src=&quot;1.jpg&quot; alt=&quot;&quot; /&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.querySelector(&#x27;button&#x27;).addEventListener(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    alert(this.innerHTML)</span><br><span class="line">    this.parentElement.innerHTML += &#x27;&lt;hr/&gt;阿顺特烦恼&#x27;</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="outerHTML"><a href="#outerHTML" class="headerlink" title="outerHTML"></a>outerHTML</h4><p>outerHTML与innerHTML的区别是包含父标签</p>
<ul>
<li>outerHTML不会删除原来的旧元素</li>
<li>只是用新内容替换替换旧内容，旧内容（标签元素）依然存在<ul>
<li>设置后，再次打印获取dom或outerHTML还是原来的旧内容，但界面已经发生了更改</li>
</ul>
</li>
</ul>
<p>下面将div#app替换为新内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;astfn&quot; data=&quot;as&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;shun&quot;&gt;SHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.outerHTML = &#x27;&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用innerHTML内容是被删除然后使用新内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  console.log(app)</span><br><span class="line">  app.innerHTML = &#x27;阿顺特烦恼&#x27;</span><br><span class="line">  console.log(app)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>而使用outerHTML是保留旧内容，页面中使用新内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  console.log(app,app.outerHTML)</span><br><span class="line">  app.outerHTML = &#x27;阿顺特烦恼&#x27;</span><br><span class="line">  console.log(app,app.outerHTML)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="innerText与textContent"><a href="#innerText与textContent" class="headerlink" title="innerText与textContent"></a>innerText与textContent</h4><p>textContent与innerText是访问或添加文本内容到元素中</p>
<ul>
<li>textContent部分IE浏览器版本不支持</li>
<li>innerText部分FireFox浏览器版本不支持</li>
<li>获取时忽略所有标签,只获取文本内容</li>
<li>设置时将内容中的标签当文本对待不进行标签解析</li>
</ul>
<p>获取时忽略内容中的所有标签</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  console.log(app.textContent)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>设置内容时会将标签当普通文本对待，即转为HTML实体内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.textContent=&quot;&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;&quot;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="outerText"><a href="#outerText" class="headerlink" title="outerText"></a>outerText</h4><p>与innerText差别是：outerText会所操作标签本身，innerText操作标签内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;Ashuntefannao&lt;/h1&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let h1 = document.querySelector(&#x27;h1&#x27;)</span><br><span class="line">  h1.outerText = &#x27;阿顺特烦恼&#x27;</span><br><span class="line">  console.log(document.querySelector(&#x27;h1&#x27;)); //null</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="insertAdjacentText"><a href="#insertAdjacentText" class="headerlink" title="insertAdjacentText"></a>insertAdjacentText</h4><p><code>insertAdjacentText(position,str)</code></p>
<p>将文本插入到元素指定位置，不会对文本中的标签进行解析，包括以下位置</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>beforebegin</td>
<td>元素本身前面</td>
</tr>
<tr>
<td>afterend</td>
<td>元素本身后面</td>
</tr>
<tr>
<td>afterbegin</td>
<td>元素内部前面</td>
</tr>
<tr>
<td>beforeend</td>
<td>元素内部后面</td>
</tr>
</tbody></table>
<p>添加文本内容到div#app前面</p>
<ul>
<li>使用<code>insertAdjacentText</code>方法，只能追加普通文本，不会解析其中的HTML标签</li>
<li>若想要追加包含HTML标签的文本，并希望对其解析，可以使用后续章节<strong>节点管理</strong>中的<code>insertAdjacentHTML</code></li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;astfn&quot; data=&quot;hd&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;shun&quot;&gt;SHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.insertAdjacentText(&#x27;beforebegin&#x27;, &#x27;&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;&#x27;)  //不会解析HTML标签</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="节点管理"><a href="#节点管理" class="headerlink" title="节点管理"></a>节点管理</h3><p>现在我们来讨论下节点元素的管理，包括添加、删除、替换等操作</p>
<h4 id="推荐方法"><a href="#推荐方法" class="headerlink" title="推荐方法"></a>推荐方法</h4><table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>dom.append(elem/str)</code></td>
<td>节点内尾部添加新节点或字符串</td>
</tr>
<tr>
<td><code>dom.prepend(elem/str)</code></td>
<td>节点内开头添加新节点或字符串</td>
</tr>
<tr>
<td><code>dom.before(elem/str)</code></td>
<td>节点前面添加新节点或字符串</td>
</tr>
<tr>
<td><code>dom.after(elem/str)</code></td>
<td>节点后面添加新节点或字符串</td>
</tr>
<tr>
<td><code>dom.replaceWith(elem/str)</code></td>
<td>将节点替换为新节点或字符串</td>
</tr>
<tr>
<td><code>dom.remove()</code></td>
<td>删除节点</td>
</tr>
</tbody></table>
<p>在标签内容后面添加新内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.append(&#x27;-阿顺特烦恼&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>同时添加多个内容，包括字符串与元素标签</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let h1 = document.createElement(&#x27;h1&#x27;)</span><br><span class="line">  h1.append(&#x27;阿顺特烦恼&#x27;)</span><br><span class="line">  app.append(&#x27;@&#x27;, h1)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>将标签替换为新内容</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let h1 = document.createElement(&#x27;h1&#x27;)</span><br><span class="line">  h1.append(&#x27;阿顺特烦恼&#x27;)</span><br><span class="line">  app.replaceWith(h1)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>添加新元素h1到目标元素div#app里面</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  let h1 = document.createElement(&#x27;h1&#x27;)</span><br><span class="line">  h1.innerHTML = &#x27;阿顺特烦恼&#x27;</span><br><span class="line">  app.append(h1)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>将h2移动到h1之前</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;</span><br><span class="line">&lt;h2&gt;Ashuntefannao&lt;/h2&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let h1 = document.querySelector(&#x27;h1&#x27;)</span><br><span class="line">  let h2 = document.querySelector(&#x27;h2&#x27;)</span><br><span class="line">  h1.before(h2)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用remove方法可以删除节点</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  Ashuntefannao</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.remove()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="insertAdjacentHTML"><a href="#insertAdjacentHTML" class="headerlink" title="insertAdjacentHTML"></a>insertAdjacentHTML</h4><p><code>insertAdjacentHTML(position,str)</code></p>
<p>将html文本插入到元素指定位置，浏览器会对文本进行标签解析，包括以下位置</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>beforebegin</td>
<td>元素本身前面</td>
</tr>
<tr>
<td>afterend</td>
<td>元素本身后面</td>
</tr>
<tr>
<td>afterbegin</td>
<td>元素内部前面</td>
</tr>
<tr>
<td>beforeend</td>
<td>元素内部后面</td>
</tr>
</tbody></table>
<p>在div#app前添加HTML文本</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class=&quot;astfn&quot; data=&quot;hd&quot;&gt;Ashuntefannao&lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;shun&quot;&gt;SHUN&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.querySelector(&#x27;#app&#x27;)</span><br><span class="line">  app.insertAdjacentHTML(&#x27;beforebegin&#x27;, &#x27;&lt;h1&gt;阿顺特烦恼&lt;/h1&gt;&#x27;)  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="insertAdjacentElement"><a href="#insertAdjacentElement" class="headerlink" title="insertAdjacentElement"></a>insertAdjacentElement</h4><p><code>insertAdjacentElement(position,elem)</code></p>
<p>insertAdjacentElement() 方法将指定元素插入到元素的指定位置，包括以下位置</p>
<ul>
<li>第一个参数是位置</li>
<li>第二个参数为<strong>新元素节点</strong></li>
</ul>
<table>
<thead>
<tr>
<th>选项</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>beforebegin</td>
<td>元素本身前面</td>
</tr>
<tr>
<td>afterend</td>
<td>元素本身后面</td>
</tr>
<tr>
<td>afterbegin</td>
<td>元素内部前面</td>
</tr>
<tr>
<td>beforeend</td>
<td>元素内部后面</td>
</tr>
</tbody></table>
<p>在div#app 标签前插入span标签</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id&#x3D;&quot;app&quot;&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;astfn&quot;&gt;Ashuntefannao&lt;&#x2F;div&gt;</span><br><span class="line">  &lt;div class&#x3D;&quot;shun&quot;&gt;SHUN&lt;&#x2F;div&gt;</span><br><span class="line">&lt;&#x2F;div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app &#x3D; document.querySelector(&#39;#app&#39;)</span><br><span class="line">  let span &#x3D; document.createElement(&#39;span&#39;)</span><br><span class="line">  span.innerHTML &#x3D; &#39;阿顺特烦恼&#39;</span><br><span class="line">  app.insertAdjacentElement(&#39;beforebegin&#39;, span)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="古老方法"><a href="#古老方法" class="headerlink" title="古老方法"></a>古老方法</h4><p>下面列表过去使用的操作节点的方法，现在不建议使用了。但在阅读老代码时可来此查看语法</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>appendChild</td>
<td>添加节点</td>
</tr>
<tr>
<td>insertBefore</td>
<td>用于插入元素到另一个元素的前面</td>
</tr>
<tr>
<td>removeChild</td>
<td>删除节点</td>
</tr>
<tr>
<td>replaceChild</td>
<td>进行节点的替换操作</td>
</tr>
</tbody></table>
<h4 id="DocumentFragment"><a href="#DocumentFragment" class="headerlink" title="DocumentFragment"></a>DocumentFragment</h4><p>在了解DocumentFragment之前，我们先了解一下页面的呈现、回流、重绘的过程。</p>
<h5 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h5><p>页面呈现、重绘、回流。</p>
<h6 id="界面呈现"><a href="#界面呈现" class="headerlink" title="界面呈现"></a>界面呈现</h6><blockquote>
<p>获取html解析为Dom tree–&gt;获取css样式解析为样式结构体–&gt;Dom tree与样式结构体结合形成render tree</p>
</blockquote>
<ol>
<li><p>```<br>浏览器把获取到的html代码解析成1个Dom树，html中的每个tag都是Dom树中的1个节点，根节点就是我们常用的document对象(<html> tag)。dom树就是我们用开发者工具看到的html结构，里面包含了所有的html tag</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">2. &#96;&#96;&#96;</span><br><span class="line">   浏览器把所有样式(主要包括css和浏览器的样式设置)解析成样式结构体，在解析的过程中会去掉浏览器不能识别的样式，比如IE会去掉-moz开头的样式，而firefox会去掉_开头的样式。</span><br></pre></td></tr></table></figure></li>
<li><p>```<br>dom tree和 样式结构体 结合后构建 呈现树(render tree)<br>render tree有点类似于dom tree，但其实区别有很大，render tree能识别样式，render tree中每个node都有自己的style，而且render tree不包含隐藏的节点(比如display:none的节点，还有head节点)，因为这些节点不会用于呈现，所以就不会包含到render tree中。<br>注意 visibility:hidden隐藏的元素还是会包含到render tree中的，因为visibility:hidden 会影响布局(layout)，会占有空间。根据css2的标准，render tree中的每个节点都称为box，box所有属性：width,height,margin,padding,left,top,border等。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">4. &#96;&#96;&#96;</span><br><span class="line">   一旦render tree构建完毕后，浏览器就可以根据render tree来绘制页面了。</span><br></pre></td></tr></table></figure></li>
</ol>
<h6 id="界面回流"><a href="#界面回流" class="headerlink" title="界面回流"></a>界面回流</h6><p>当render tree中的一部分(或全部)因为元素的规模尺寸，布局，隐藏等改变而需要重新构建。这就称为回流(其实我觉得叫重新布局更简单明了些)。每个页面至少需要一次回流，就是在页面第一次加载的时候。</p>
<p>影响布局的操作都会产生回流，发生回流(节点重新构建)一定会触发重绘。</p>
<h6 id="界面重绘"><a href="#界面重绘" class="headerlink" title="界面重绘"></a>界面重绘</h6><p>当render tree中的一些元素需要更新属性，而这些属性只是影响元素的外观，风格，而不会影响布局的，比如background-color。则就叫称为重绘。</p>
<p>界面重绘不一定存在界面回流。</p>
<hr>
<h5 id="问题解决"><a href="#问题解决" class="headerlink" title="问题解决"></a>问题解决</h5><p>当对节点进行添加、删除等操作时，都会引起页面回流来重新构建DOM渲染页面,</p>
<p><strong>解决以上问题可以使用以下几种方式</strong></p>
<ol>
<li>可以将DOM写成html字符串，然后使用innerHTML添加到页面中，但这种操作会比较麻烦，且不方便使用节点操作的相关方法。</li>
<li>使用createDocumentFragment来管理节点时，此时节点都在内存中，而不是DOM树中。对节点的操作不会引发页面回流,带来比较好的性能体验。</li>
</ol>
<p><strong>DocumentFragment特点</strong></p>
<ul>
<li>createDocumentFragment父节点为null</li>
<li>继承自node所以可以使用NODE的属性和方法</li>
<li>createDocumentFragment创建的是文档碎片，节点类型nodeType为11。因为不在DOM树中所以只能通过JS进行操作</li>
<li>添加createDocumentFragment添加到DOM后,就不可以再操作createDocumentFragment元素了,这与DOM操作是不同的</li>
<li>将文档DOM添加到createDocumentFragment时,会移除文档中的DOM元素</li>
<li>createDocumentFragment创建的节点添加到其他节点上时，会将子节点一并添加</li>
<li>createDocumentFragment是虚拟节点对象，不直接操作DOM所以性能更好</li>
<li>在排序/移动等大量DOM操作时建议使用createDocumentFragment</li>
</ul>
<h3 id="表单控制"><a href="#表单控制" class="headerlink" title="表单控制"></a>表单控制</h3><p>表单是高频操作的元素，下面来掌握表单项的DOM操作</p>
<h4 id="表单查找"><a href="#表单查找" class="headerlink" title="表单查找"></a>表单查找</h4><p>JS为表单的操作提供了单独的集合控制</p>
<ul>
<li>使用<code>document.forms</code>获取表单集合</li>
<li>使用<code>document.forms.formName</code>获取对应name属性的form表单</li>
<li>使用<code>form.elements.inputName\form.inputName</code>获取form中对应name属性的input表单元素</li>
<li>针对radio/checkbox获取的表单项是一个集合</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action&#x3D;&quot;&quot; name&#x3D;&quot;from1&quot;&gt;</span><br><span class="line">  &lt;input type&#x3D;&quot;text&quot; name&#x3D;&quot;form1_input&quot; &#x2F;&gt;</span><br><span class="line">&lt;&#x2F;form&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const form &#x3D; document.forms.form1</span><br><span class="line">  console.log(form.elements.form1_input)</span><br><span class="line">&lt;&#x2F;script&gt;</span><br></pre></td></tr></table></figure>

<p>通过表单项可以反向查找FORM</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;&quot; name=&quot;form1&quot;&gt;</span><br><span class="line">  &lt;input type=&quot;text&quot; name=&quot;form1_input&quot; /&gt;</span><br><span class="line">&lt;/form&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  const form = document.forms.form1</span><br><span class="line">  console.log(form.form1_input.form === form) //true</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>





<h3 id="样式管理"><a href="#样式管理" class="headerlink" title="样式管理"></a>样式管理</h3><p>通过DOM修改样式可以通过更改元素的class属性或通过style对象设置行样式来完成。</p>
<ul>
<li>建议使用class控制样式，将任务交给CSS处理，更简单高效</li>
</ul>
<h4 id="批量设置"><a href="#批量设置" class="headerlink" title="批量设置"></a>批量设置</h4><ul>
<li>使用<code>className</code>或<code>setAttribute</code>设置calss属性，<strong>会覆盖原来的类名</strong></li>
</ul>
<p>使用JS的className可以批量设置样式</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  </span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">  app.className = &#x27;astfn&#x27;</span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>也可以通过特征的方式来更改</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  </span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">  app.setAttribute(&#x27;class&#x27;, &#x27;astfn&#x27;)</span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="classList"><a href="#classList" class="headerlink" title="classList"></a>classList</h4><p>classList操作的是class属性列表，用于操作单个className，不会影响其它的className。如果对类单独进行控制使用 classList属性操作</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>node.classList.add</td>
<td>添加类名</td>
</tr>
<tr>
<td>node.classList.remove</td>
<td>删除类名</td>
</tr>
<tr>
<td>node.classList.toggle</td>
<td>切换类名</td>
</tr>
<tr>
<td>node.classList.contains</td>
<td>类名检测</td>
</tr>
</tbody></table>
<p>在元素的原有class上添加新class</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  </span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">  app.classList.add(&quot;ashun&quot;)</span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用classList也可以移除class列表中的某个class</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  </span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">  app.classList.remove(&#x27;container&#x27;)</span><br><span class="line">  console.log(app.getAttribute(&quot;class&quot;))</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用toggle切换类，即类已经存在时删除，不存在时添加</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  app.addEventListener(&#x27;click&#x27;, function () &#123;</span><br><span class="line">    this.classList.toggle(&#x27;astfn&#x27;)</span><br><span class="line">  &#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>使用contains检查class是否存在</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  console.log(app.classList.contains(&#x27;container&#x27;)) //true</span><br><span class="line">  console.log(app.classList.contains(&#x27;as&#x27;)) //false</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="设置行样式"><a href="#设置行样式" class="headerlink" title="设置行样式"></a>设置行样式</h4><p>通过style对象可以对行内样式属性单独设置，使用cssText可以批量设置行内样式</p>
<blockquote>
<p>直接通过dom.prop能够访问/修改节点的对应属性,那么这个属性就是之前讲到的标准属性.</p>
<p>通过style能够直接访问/修改 节点的样式属性 , 即操作的都是行内样式.</p>
</blockquote>
<p><strong>样式属性设置</strong></p>
<p>使用节点的style对象来设置行样式</p>
<ul>
<li>多个单词的属性使用驼峰进行命名</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  app.style.backgroundColor = &#x27;red&#x27;</span><br><span class="line">  app.style.color = &#x27;yellow&#x27;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p><strong>批量设置行样式</strong></p>
<p>使用 <code>cssText=&quot;...cssStr&quot;</code>属性可以批量设置行样式，<strong>属性名和写CSS一样不需要考虑驼峰命名</strong></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  app.style.cssText = `background-color:red;color:yellow`</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>也可以通过<code>setAttribute</code>改变style特征来批量设置样式</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot; class=&quot;d-flex container&quot;&gt;阿顺特烦恼&lt;/div&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">  let app = document.getElementById(&#x27;app&#x27;)</span><br><span class="line">  app.setAttribute(&#x27;style&#x27;, `background-color:red;color:yellow;`)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="获取样式"><a href="#获取样式" class="headerlink" title="获取样式"></a>获取样式</h4><ul>
<li>可通过<code>dom.style.prop</code>或<code>getAttribute</code>获取行内样式</li>
<li>可通过<code>window.getComputedStyle(dom).prop</code>对象获取样式属性，下面进行说明</li>
</ul>
<p><code>style</code>和<code>getAttribute</code>只能获取行样式</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  div &#123;</span><br><span class="line">    background-color: black;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line">&lt;body&gt;&lt;div id=&quot;app&quot;&gt;阿顺特烦恼&lt;/div&gt;&lt;/body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">      let app = document.getElementById(&quot;app&quot;);</span><br><span class="line"></span><br><span class="line">      function getLineStyle(dom) &#123;</span><br><span class="line">        console.log(`getAttribute---$&#123;dom.getAttribute(&quot;style&quot;)&#125;`);</span><br><span class="line">        console.log(`dom.stype.prop---$&#123;dom.style.backgroundColor&#125;`);</span><br><span class="line">      &#125;</span><br><span class="line">      app.addEventListener(&quot;click&quot;, () =&gt; &#123;</span><br><span class="line">        getLineStyle(app);</span><br><span class="line">        setTimeout(() =&gt; &#123;</span><br><span class="line">          app.style.backgroundColor = &quot;yellowgreen&quot;;</span><br><span class="line">          getLineStyle(app);</span><br><span class="line">        &#125;, 100);</span><br><span class="line">      &#125;);</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p><strong>getComputedStyle</strong></p>
<p>使用window.getComputedStyle可获取所有应用在元素上的样式属性</p>
<ul>
<li>函数第一个参数为元素</li>
<li>第二个参数为伪类</li>
<li>获取计算后的样式属性，是所有样式复合的结果 , 所以取得的单位和定义时的可能会有不同</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">  div &#123;</span><br><span class="line">    background-color: black;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line">&lt;body&gt;&lt;div id&#x3D;&quot;app&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">      let app &#x3D; document.getElementById(&quot;app&quot;);</span><br><span class="line">      app.addEventListener(&quot;click&quot;, () &#x3D;&gt; &#123;</span><br><span class="line">        console.log(window.getComputedStyle(app).backgroundColor);</span><br><span class="line">        setTimeout(() &#x3D;&gt; &#123;</span><br><span class="line">          app.style.backgroundColor &#x3D; &quot;yellowgreen&quot;;</span><br><span class="line">          console.log(window.getComputedStyle(app).backgroundColor);</span><br><span class="line">        &#125;, 100);</span><br><span class="line">      &#125;);</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>

<p>window.getComputedStyle获取的是计算后的样式属性 , 是所有样式复合的结果</p>
<ul>
<li>由于行内样式优先级别高 , 所以打印的是蓝色对应的rgb值</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;style&gt;</span><br><span class="line">div &#123;</span><br><span class="line">	background-color: black;</span><br><span class="line">&#125;</span><br><span class="line">&lt;&#x2F;style&gt;</span><br><span class="line">&lt;body&gt;&lt;div id&#x3D;&quot;app&quot; style&#x3D;&quot;background-color: blue&quot;&gt;阿顺特烦恼&lt;&#x2F;div&gt;&lt;&#x2F;body&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">      let app &#x3D; document.getElementById(&quot;app&quot;);</span><br><span class="line">      console.log(window.getComputedStyle(app).backgroundColor);  &#x2F;&#x2F;rgb(0,0,255)</span><br><span class="line">&lt;&#x2F;style&gt;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    
      <footer class="post-footer">
        <div class="post-eof"></div>
      </footer>
  </article>
  
  
  


  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left" aria-label="上一页"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/33/">33</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="阿顺特烦恼"
      src="/images/headPortrait.jpg">
  <p class="site-author-name" itemprop="name">阿顺特烦恼</p>
  <div class="site-description" itemprop="description">阿顺特烦恼,希望大家没有烦恼</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">33</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">11</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">2</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/astfn" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;astfn" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://gitee.com/ashuntefannao" title="Gitee → https:&#x2F;&#x2F;gitee.com&#x2F;ashuntefannao" rel="noopener" target="_blank"><i class="fab fa-google fa-fw"></i>Gitee</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fab fa-adn"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">阿顺特烦恼</span>
</div>
  <div class="powered-by">
     <!-- 外部引入 访客计数器-->
      <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      <span id="busuanzi_container_site_pv">
        本站总访问量<span id="busuanzi_value_site_pv"></span>次
      </span><br/>
      
      <strong style="color:#ccc">ASHUNTEFANNAO</strong><br/>
      <span style="color:#ccc;font-size:13px">博客文章版权归作者 阿顺特烦恼 所有</span><br/>
      <span style="color:#ccc;font-size:13px">欢迎转载 但未经作者同意 必须保留此段声明</span><br/>
  </div>
  
  <!--
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>
  -->



<!-- 外部脚本 -->

<!--以下部分脚本依赖jquery-->
	<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>

<!--浏览器搞笑标题 //实测会影响图标-->
	<!--<script async src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/hititle.js"></script>-->

	<!-- 🌸飘落 -->
		<!--<script async src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/sakura.js"></script>-->

	<!-- 雪花飘落 -->
	  <!-- <script async src="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/snow1.js"></script> -->

	<!-- // 文字 -->
    <!--<script async src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/shehuizhuyi.js"></script>-->

<!-- // 烟花 -->
	<canvas class="fireworks" style="position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;" ></canvas> 
	<script async type="text/javascript" src="//cdn.bootcss.com/animejs/2.2.0/anime.min.js"></script> 
	<script async src="https://cdn.jsdelivr.net/gh/Yafine/cdn@2.5/source/js/fireworks.js"></script>

<!-- // 星星跟随坠落 -->
	<script async src="https://cdn.jsdelivr.net/gh/cungudafa/cdn@2.1.2/js/cursor.js"></script>

<!-- // 连线 
	<script src="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/canvas-nest.min.js"></script>
	<script type="text/javascript" src="https://cdn.bootcss.com/canvas-nest.js/1.0.1/canvas-nest.min.js"></script>-->

<!-- 样式二（飘动的彩带） -->
	<script async src="https://cdn.jsdelivr.net/gh/wallleap/cdn@latest/js/piao.js" type="text/javascript"></script>

<!--背景切换-->
  <!--<script async src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>-->



        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>

<script src="/js/bookmark.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  

<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.618,"jsonPath":"/live2dw/assets/hijiki.model.json"},"display":{"superSample":2,"width":72,"height":145,"position":"right","hOffset":-3,"vOffset":-40},"mobile":{"show":true,"scale":1},"react":{"opacityDefault":0.5,"opacityOnHover":0.8},"log":false});</script></body>
</html>
